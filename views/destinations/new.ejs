<%- include('../partials/header') %>

<div class="container">
  <h1><%= destination ? 'Edit Destination' : 'Add Destination' %></h1>
  <form action="/itineraries/<%= itinerary._id %>/destinations<%= destination ? `/${destination._id}?_method=PUT` : '/new' %>" method="POST">
    <% if (destination) { %>
      <input type="hidden" name="_method" value="PUT">
    <% } %>
    <div class="mb-3">
      <label for="city" class="form-label">City</label>
      <input type="text" class="form-control" id="city" name="city" value="<%= destination ? destination.city : '' %>" required>
    </div>
    <div class="mb-3">
      <label for="startDate" class="form-label">Start Date</label>
      <input type="date" class="form-control" id="startDate" name="startDate" value="<%= destination ? destination.startDate : '' %>">
    </div>
    <div class="mb-3">
      <label for="endDate" class="form-label">End Date</label>
      <input type="date" class="form-control" id="endDate" name="endDate" value="<%= destination ? destination.endDate : '' %>">
    </div>
    <button type="submit" class="btn btn-primary"><%= destination ? 'Update Destination' : 'Create Destination' %></button>
  </form>
  <% if (destination && destination._id) { %>
    <form action="/itineraries/<%= itinerary._id %>/destinations/<%= destination._id %>?_method=DELETE" method="POST">
        <input type="hidden" name="_method" value="DELETE">
      <button type="submit" class="btn btn-danger">Delete Destination</button>
    </form>
  <% } %>
</div>

<%- include('../partials/footer') %>
